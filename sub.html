<!DOCTYPE html>
<html lang="ko">
<head>
    <title>상상의 섬, 제주 :: 제이티의 상상은 현실이 된다</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport"
          content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <META http-equiv="Expires" content="-1">
    <META http-equiv="Pragma" content="no-cache">
    <META http-equiv="Cache-Control" content="No-Cache">

    <meta name="title" content="상상의 섬, 제주"/>
    <meta name="description" content="제이티의 상상은 현실이 된다"/>
    <meta name="keywords" content="상상의섬 제주, 제이티의 상상은 현실이 된다">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="상상의 섬, 제주"/>
    <meta property="og:title" content="상상의 섬, 제주"/>
    <meta property="og:description" content="제이티의 상상은 현실이 된다"/>
    <meta property="og:image" content="" />

    <link rel="stylesheet" href="fonts/icomoon/style.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/sub.css">
</head>
<body>

<div id="root" class="site-wrap">
    <header class="site-navbar js-sticky-header site-navbar-target" role="banner">
        <div class="container">
            <div class="row align-items-center justify-content-between">
                <div class="col-12 header-navigation">
                    <nav class="site-navigation position-relative" role="navigation">
                        <ul class="site-menu main-menu js-clone-nav">
                            <li><a href="index.html"><span>상상의섬 제주</span></a></li>
                            <li><a href="javascript:;"><span>마일리지 적립</span></a></li>
                            <li><a href="sub.html" class="active"><span>제이티's Pick</span></a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <div class="site-section first" id="first-section">
        <div class="container-jt text-center">
            <div class="site-section__header">
                <img src="./images/sub/visual.png" class="d-none d-lg-inline-block" alt="제이티's Pick!"/>
                <img src="./images/sub/mobile/visual.png" class="w-100 d-lg-none" alt="제이티's Pick!"/>
            </div>
            <div class="site-section__body">
                <h2 class="font-family-cafe24">여러분의 제주를 Pick 해보세요</h2>

                <div class="site-section__content">
                    <p>프로여행러 제이티가 Pick한 <br class="d-md-none"/>매력적인 제주 여행지 여기다 있어요.​</p>
                    <p>여행지별 상세 정보부터 제이티의 여행 꿀팁까지!​</p>
                    <p>실제 방문한 여행 사진을 인증하면 <br class="d-md-none"/>제이티 마일리지 적립 +100​</p>
                    <p>상상의 섬 제주에서 마음껏 여행하고, <br class="d-md-none"/>환상의 섬 제주에서 우리 만나요!</p>
                </div>

                <div class="site-section__range">
                    참여 가능 기간 : 2022년 8월 8일(월) ~ 12월 23일(금)
                </div>

                <ul class="site-section__gallery">
                   <li><img src="./images/sub/item01.png" alt=""/></li>
                   <li><img src="./images/sub/item02.png" alt=""/></li>
                   <li><img src="./images/sub/item03.png" alt=""/></li>
                   <li><img src="./images/sub/item04.png" alt=""/></li>
                   <li><img src="./images/sub/item05.png" alt=""/></li>
                   <li><img src="./images/sub/item06.png" alt=""/></li>
                   <li><img src="./images/sub/item07.png" alt=""/></li>
                   <li><img src="./images/sub/item08.png" alt=""/></li>
                   <li><img src="./images/sub/item09.png" alt=""/></li>
                </ul>

                <div class="loader"></div>
            </div>
        </div>
    </div>

    <div class="site-section notice" id="notice-section">
      <div class="container-jt">
        <div class="section-header">
          <h3>유의 사항</h3>
        </div>
        <div class="notice-container">
          <p>제이티 마일리지 적립은 본 홈페이지를 통해서만 적립 신청이 가능합니다.​</p>
          <p>본 이벤트는 당사 사정에 따라 변경 또는 중단될 수 있습니다.​​</p>
          <p>참여하신 인증 사진은 제주관광협회의 마케팅 컨텐츠로 활용될 수 있습니다.​​</p>
          <p>비정상적 방법(이미지 도용, 중복 등)을 통한 콘테스트 참여자는 이벤트 당첨자 선정에서​ 제외되며,
            당첨 후에도 당첨 취소 및 경품 회수 등의 불이익을 받을 수 있습니다.​​</p>
          <p>이벤트 내용 및 경품, 당첨자 발표일은 당사 사정에 따라 변동 또는 지연될 수 있습니다.​​</p>
          <p>이벤트 당첨자 발표 후, 본 캠페인의 운영대행사에서 경품 배송을 위한 주소 등의 개인 정보 제출을​
            요청드리며, 요청 후 7일 이내 개인 정보 미회신 시에는 당첨이 취소됩니다.​​</p>
          <p>취합된 개인 정보는 경품 배송 이외의 목적으로 활용되지 않으며, 수집된 개인 정보는 이용 목적 달성 즉시 파기됩니다.​​</p>
          <p>경품 배송은 국내배송만 가능하며, 잘못된 개인 정보 입력으로 인한 배송 오류는 책임지지 않습니다.​​</p>
          <p>5만원 초과 경품에 대한 제세공과금(22%)는 당첨자 본인 부담입니다.</p>
        </div>
      </div>
    </div>

    <footer class="site-footer">
      <div class="container">
        <div class="row">
          <div class="col-12 col-md-3 logo-footer text-center">
            <img src="./images/main/logo.png" alt="로고 이미지"/>
          </div>
          <div class="col-12 col-md-9 text-center text-md-right pt-2 pt-md-0">
            <p>Copyright 2022 제주특별자치도관광협회 All rights reserved</p>
          </div>
        </div>
      </div>
    </footer>


    <div id="modal-event" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-visual">
                    <img src="./images/modal/visual.event.png" alt=""/>
                </div>
                <div class="modal-body">
                    <div class="modal-body__header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14.849" height="14.849" viewBox="0 0 14.849 14.849">
                                <g id="icon_close" transform="translate(-609.172 -1166.373) rotate(45)">
                                    <path id="path_23" data-name="path_23" d="M4818,3024v20" transform="translate(-3552 -2640)" fill="none" stroke="#707070" stroke-width="1"/>
                                    <path id="path_24" data-name="path_24" d="M0,0V20" transform="translate(1276 394) rotate(90)" fill="none" stroke="#707070" stroke-width="1"/>
                                </g>
                            </svg>
                        </button>
                    </div>
                    <div class="modal-body__content">
                        <div class="modal-body__content--top">
                            <h3 class="font-family-cafe24">
                                당신의 과수원
                                <a href="javascript:openShareModal();" class="btn-share">
                                    <img src="./images/modal/icon_share.png" alt="공유하기"/>
                                </a>
                            </h3>
                            <p>9~11월에 오면 귤이 더 달아 맛있는 “당신의 과수원”</p>
                            <p>#연인과함께 #데이트장소 #주차공간 #펫여행</p>
                        </div>
                        <div class="modal-body__content--middle">
                            <h4 class="font-family-cafe24">제이티's 여행 꿀팁</h4>
                            <p>당신의 과수원은 정해진 바구니에 꽉 담아서 귤을 따면​
                                집에 가져갈 수 있어요~ 게다가 바구니를 가장 먼저
                                채운 사람에게는 보너스 귤을 추가해준답니다!</p>
                            <h4 class="font-family-cafe24">추천 링크</h4>
                            <p>당신의 과수원을 한 눈에 볼 수 있게 모아봤어요!​
                                과수원이 마음에 든다면 상단의 하트를 꾹! 눌러볼까요?</p>

                            <img src="./images/modal/thumb.png" alt=""/>
                        </div>
                        <div class="modal-body__content--bottom">
                            <p><span>주소</span> 제주도 제주시 당신의 과수원동</p>
                            <p><span>영업시간</span> 09:00 -18:00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

  <div id="modal-share" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h3>공유</h3>
        </div>
        <div class="modal-body">
          <div class="container">
            <a href="javascript:void(0);" class="s_fb"><img src="./images/modal/btn_fb.png"
                                                            alt="페이스북 공유"/></a>
            <a href="javascript:void(0);" class="s_ka"><img src="./images/modal/btn_ka.png"
                                                            alt="카카오 공유"/></a>
            <a href="javascript:void(0);" class="s_tw"><img src="./images/modal/btn_tw.png"
                                                            alt="트위터 공유"/></a>
            <a href="javascript:void(0);" data-clipboard-target="#share_url" data-clipboard-action="copy"
               id="s_cp" class="s_cp"><img src="./images/modal/btn_sh.png" alt="일반 공유"/></a>
          </div>
        </div>
        <div class="modal-footer">
          <a href="javascript:closeShareModal();">취소</a>
        </div>
      </div>
    </div>
  </div>

</div> <!-- .site-wrap -->

<script src="./js/jquery-3.6.0.min.js"></script>
<script src="./js/jquery-ui.js"></script>
<script src="./js/jquery.easing.1.3.js"></script>
<script src="./js/popper.min.js"></script>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/jquery.sticky.js"></script>

<script src="./js/main.js"></script>
<script type="text/javascript">
    var $first_section = $("#first-section");
    var $notice_section = $("#notice-section");
    var beforeScrollTop = null;

    $(function() {
      $("#modal-event").modal("show");

      function onScroll() {
        if (window.pageYOffset + window.innerHeight >=
          document.documentElement.scrollHeight - ($notice_section.outerHeight() + $("footer").outerHeight() + $(".loader").outerHeight() + 50)
        ) {
          console.log("scroll checked..");
          beforeScrollTop = $(window).scrollTop();
          fetchJoinerList();
        }
      }
      window.addEventListener("scroll", throttle(onScroll, 1000));
    });

    $(window).on("load", function () {
      // 리스트 로딩 (1페이지)
      fetchJoinerList();
    });

    /**
     * 참여자 명단가져오기
     */
    var page = 1, isComplete = false;
    var isLoadingList = false;
    function fetchJoinerList() {
      if (isLoadingList || isComplete) return;

      isLoadingList = true;
      var $list_container = $first_section.find(".site-section__gallery");
      var params = Object.assign({
        pageNumber: page,
      });

      if (!$first_section.find(".loader").is(":visible")) {
        $first_section.find(".loader").show();
      }

      $.ajax({
        method: 'get',
        url: "./list.json",
        data: params,
        dataType: 'json',
        success: function (data) {
          var results = data.list;
          var pagination = data.pagination;
          var getPageNumber = Number(pagination.pageNumber);
          var getTotalPages = Number(pagination.totalPages);

          if (results.length) {
            results.forEach(function (e) {
              var el = '<li>' +
                '   <img src="'+ e.imgPath +'" alt=""/>' +
                '</li>';
              var $el = $(el);
              $el.appendTo($list_container);
            });

            // 추가 스크롤 로딩을 위해서 이전 스크롤위치값으로 강제 이동
            if (beforeScrollTop) {
              $("html, body").animate({
                scrollTop: beforeScrollTop
              }, 0);
            }
          } else {
            var $el = $('<li class="list__item-empty">등록 된 이미지가 없습니다.</li>');
            $el.appendTo($list_container);

            isComplete = true;
          }

          // 마지막 페이지 체크
          if (page >= getTotalPages) {
            isComplete = true;
          }

          page++;
        },
        error: function (xhr) {
          console.log(xhr.responseText);
          $first_section.find(".loader").hide();
          alert("지금은 시스템 사정으로 인하여 요청하신 작업이 이루어지지 않았습니다.\n잠시후 다시 이용하세요.");
        },
        complete: function () {
          isLoadingList = false;

          if (isComplete) {
            $first_section.find(".loader").hide();
          }
        }
      });
    }

    function throttle(fn, delay) {
      let timer;
      return function(){
        if(!timer) {
          timer = setTimeout(()=>{
            timer = null;
            fn.apply(this,arguments)
          }, delay)
        }
      }
    }

    function openShareModal() {
      $("#modal-share").modal('show');
    }
    function closeShareModal() {
      $("#modal-share").modal('hide');
    }
</script>
</body>
</html>
